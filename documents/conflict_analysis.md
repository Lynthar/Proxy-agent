# 最近四个提交的冲突点与解决建议

下表针对当前分支最近四个提交（自 `8cfb11f` 起）在合并到其他分支或彼此摘樱(cherry-pick)时可能产生的冲突点进行梳理，并提供建议的解决取舍。

## 1. b55b021 — README 改名与链接调整
- **修改位置**：`README.md` 的标题、安装命令和社区链接重写。【F:README.md†L1-L46】
- **冲突点**：如果目标分支仍保留原始 `v2ray-agent` 介绍或含有推广/捐赠链接，这些改写会与旧版同一段落发生文本冲突（标题、安装命令、支持部分）。
- **建议**：
  - 若主线希望去商业化/推广，保留本次改写；
  - 若需沿用原项目品牌或外链，则在冲突段手动择一或合并：标题与安装命令依赖新的仓库地址，其余可按需要恢复旧链接。

## 2. e2784f0 — Socks 链式出站 & 安全提示
- **修改位置**：
  - 为 Socks5 出站新增“链式出站标签”输入，并在 Xray `proxySettings` 与 sing-box `detour` 写入。【F:install.sh†L3474-L3506】【F:install.sh†L7533-L7558】
  - 安全提示与安装命令移除了 `--no-check-certificate`（SELinux/CF 提示、脚本更新命令等）。【F:install.sh†L36-L42】【F:install.sh†L6218-L6241】
- **冲突点**：
  - 与 `78d9f38`/`8cfb11f` 的 `install.sh` 变更同处一段，会在 cherry-pick 到不含这些改动的分支时触发冲突。
  - 现行 README 安装命令已去掉 `--no-check-certificate`，与旧文档或自动化脚本不同步时会冲突。
- **建议**：
  - 在合并时优先保留链式出站逻辑，但注意与 `78d9f38` 的分流文件命名（`socks5_01/02`）保持一致。
  - 脚本/文档统一是否强制证书校验，避免命令不一致。

## 3. 78d9f38 — Socks 分流文件重命名与清理
- **修改位置**：调整 sing-box Socks5 分流相关文件/标签命名（如 `socks5_01_outbound_route`、`socks5_02_inbound_route`）并补充删除逻辑，修复重复出站分流问题。【F:install.sh†L7443-L7500】
- **冲突点**：
  - 与 e2784f0 的链式出站变更同处 `setSocks5Outbound` 区域，若目标分支仍使用旧命名，会在文件名/标签上产生冲突或运行时找不到配置。
- **建议**：
  - 以新版命名为准（`socks5_01/02`），并在合并链式出站时同步使用这些标签；
  - 检查删除/展示函数（如 `showSingBoxRoutingRules`）是否同时匹配新文件名。

## 4. 8cfb11f — hy2/tuic 安装与订阅更新修复
- **修改位置**：
  - 修正 Reality 读取客户端索引、hysteria2 速率提示，以及 `addUser/removeUser` 时的订阅刷新条件。【F:install.sh†L125-L135】【F:install.sh†L6103-L6210】
- **冲突点**：
  - 与 e2784f0 在同一文件的其他区域并存，若合并到未包含该修复的分支，`readConfigHostPathUUID` 等函数会产生手工冲突；
  - 若合并时选择旧逻辑，Reality/订阅更新问题会回归。
- **建议**：
  - 优先保留索引修复与条件订阅刷新，确保 Reality 与订阅流程正常；
  - 若目标分支已有不同实现，手动验证 `jq` 路径与订阅触发条件，避免重复刷新或索引错误。

## 总体合并策略
1. 先落地 `78d9f38` 的分流命名修正作为基础，再叠加 `e2784f0` 的链式出站逻辑，确保标签/文件名一致。
2. 在应用 `b55b021` 与 `e2784f0` 的文档调整时，统一安装命令（是否保留 `--no-check-certificate`）及品牌文案，避免 README/脚本命令不一致。
3. 合并 `8cfb11f` 时确保 Reality 客户端索引与订阅刷新逻辑未被后续提交覆盖；如有冲突优先选择修复后的 `jq` 路径与条件刷新写法。
